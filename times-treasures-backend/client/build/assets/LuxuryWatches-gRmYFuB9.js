import{r,j as e,a as j}from"./index-TEer4uYd.js";import{I as g,P as y}from"./index.es-a6Voi_oT.js";import"./imageUtil-CPgIs8eT.js";import"./priceUtil-7XU-dkmR.js";const S="_luxuryWatches_1r7ic_4",v="_title_1r7ic_12",W="_productGrid_1r7ic_21",N="_loader_1r7ic_28",w="_endMessage_1r7ic_36",M="_sortContainer_1r7ic_45",C="_sortSelect_1r7ic_57",t={luxuryWatches:S,title:v,productGrid:W,loader:N,endMessage:w,sortContainer:M,sortSelect:C},G=()=>{const[n,u]=r.useState([]),[a,i]=r.useState(12),[x,c]=r.useState(!0),[h,p]=r.useState(null),[o,m]=r.useState("");r.useEffect(()=>{(async()=>{try{const l=(await j.get("http://localhost:5000/api/watches",{params:{category:"luxury-watches",sort:o,page:1,limit:100}})).data.data;if(!Array.isArray(l))throw new Error("Invalid data format from server");u(l),l.length<=12?c(!1):c(!0),i(12)}catch(d){console.error(d),p("Failed to fetch luxury watches.")}})()},[o]);const _=()=>{if(a>=n.length){c(!1);return}setTimeout(()=>{i(s=>s+12)},500)},f=s=>{m(s.target.value)};return h?e.jsx("p",{className:t.error,children:h}):e.jsxs("div",{className:t.luxuryWatches,children:[e.jsx("h2",{className:t.title,children:"Luxury Watches"}),e.jsxs("div",{className:t.sortContainer,children:[e.jsx("label",{htmlFor:"sortSelect",children:"Sort by:"}),e.jsxs("select",{id:"sortSelect",className:t.sortSelect,value:o,onChange:f,children:[e.jsx("option",{value:"",children:"Newest (Default)"}),e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"-name",children:"Name (Z-A)"}),e.jsx("option",{value:"price",children:"Price (Low to High)"}),e.jsx("option",{value:"-price",children:"Price (High to Low)"})]})]}),e.jsx(g,{dataLength:a,next:_,hasMore:x,loader:e.jsx("h4",{className:t.loader,children:"Loading..."}),endMessage:e.jsx("p",{className:t.endMessage,children:e.jsx("b",{children:"You have seen all our luxury watches!"})}),children:e.jsx("div",{className:t.productGrid,children:n.slice(0,a).map(s=>e.jsx(y,{watch:s},s._id))})})]})};export{G as default};
