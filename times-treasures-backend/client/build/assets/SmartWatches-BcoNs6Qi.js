import{r as a,j as e,a as j}from"./index-TEer4uYd.js";import{I as g,P as S}from"./index.es-a6Voi_oT.js";import"./imageUtil-CPgIs8eT.js";import"./priceUtil-7XU-dkmR.js";const w="_smartwatches_19al3_4",v="_title_19al3_12",N="_productGrid_19al3_21",M="_loader_19al3_28",y="_endMessage_19al3_36",C="_sortContainer_19al3_45",W="_sortSelect_19al3_57",t={smartwatches:w,title:v,productGrid:N,loader:M,endMessage:y,sortContainer:C,sortSelect:W},L=()=>{const[n,m]=a.useState([]),[r,i]=a.useState(12),[u,o]=a.useState(!0),[h,p]=a.useState(null),[c,x]=a.useState("");a.useEffect(()=>{(async()=>{try{const l=(await j.get("http://localhost:5000/api/watches",{params:{category:"smartwatches",sort:c,page:1,limit:100}})).data.data;if(!Array.isArray(l))throw new Error("Invalid data format from server");m(l),l.length<=12?o(!1):o(!0),i(12)}catch(d){console.error(d),p("Failed to fetch smartwatches.")}})()},[c]);const _=()=>{if(r>=n.length){o(!1);return}setTimeout(()=>{i(s=>s+12)},500)},f=s=>{x(s.target.value)};return h?e.jsx("p",{className:t.error,children:h}):e.jsxs("div",{className:t.smartwatches,children:[e.jsx("h2",{className:t.title,children:"Smartwatches"}),e.jsxs("div",{className:t.sortContainer,children:[e.jsx("label",{htmlFor:"sortSelect",children:"Sort by:"}),e.jsxs("select",{id:"sortSelect",className:t.sortSelect,value:c,onChange:f,children:[e.jsx("option",{value:"",children:"Newest (Default)"}),e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"-name",children:"Name (Z-A)"}),e.jsx("option",{value:"price",children:"Price (Low to High)"}),e.jsx("option",{value:"-price",children:"Price (High to Low)"})]})]}),e.jsx(g,{dataLength:r,next:_,hasMore:u,loader:e.jsx("h4",{className:t.loader,children:"Loading..."}),endMessage:e.jsx("p",{className:t.endMessage,children:e.jsx("b",{children:"You have seen all our smartwatches!"})}),children:e.jsx("div",{className:t.productGrid,children:n.slice(0,r).map(s=>e.jsx(S,{watch:s},s._id))})})]})};export{L as default};
