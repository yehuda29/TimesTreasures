import{r as m,A as j,b as N,j as e,a as f,y as u}from"./index-TEer4uYd.js";const v="_setAddressContainer_lswbz_3",z="_addressForm_lswbz_37",C="_formGroup_lswbz_51",_="_submitBtn_lswbz_93",r={setAddressContainer:v,addressForm:z,formGroup:C,submitBtn:_},G=()=>{const{token:p,user:d,setUser:h}=m.useContext(j),y=N(),t=d&&d.addresses&&d.addresses.length>0?d.addresses[0]:{country:"",city:"",homeAddress:"",zipcode:"",phoneNumber:""},[s,b]=m.useState(t),o=a=>{b({...s,[a.target.name]:a.target.value})},x=async a=>{var c,l;a.preventDefault();const A={addresses:[{country:s.country.trim()===""?t.country:s.country,city:s.city.trim()===""?t.city:s.city,homeAddress:s.homeAddress.trim()===""?t.homeAddress:s.homeAddress,zipcode:s.zipcode.trim()===""?t.zipcode:s.zipcode,phoneNumber:s.phoneNumber.trim()===""?t.phoneNumber:s.phoneNumber}]};try{const n={headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`}},i=await f.put("http://localhost:5000/api/users/profile",A,n);i.data&&i.data.data&&h(i.data.data),u.success("Address updated successfully!"),y("/profile")}catch(n){console.error(n),u.error(((l=(c=n.response)==null?void 0:c.data)==null?void 0:l.message)||"Failed to update address")}};return e.jsxs("div",{className:r.setAddressContainer,children:[e.jsx("h2",{children:"Set Your Address"}),e.jsxs("form",{onSubmit:x,className:r.addressForm,children:[e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{htmlFor:"country",children:"Country:"}),e.jsx("input",{type:"text",id:"country",name:"country",value:s.country,placeholder:t.country||"Country",onChange:o})]}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{htmlFor:"city",children:"City:"}),e.jsx("input",{type:"text",id:"city",name:"city",value:s.city,placeholder:t.city||"City",onChange:o})]}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{htmlFor:"homeAddress",children:"Home Address:"}),e.jsx("input",{type:"text",id:"homeAddress",name:"homeAddress",value:s.homeAddress,placeholder:t.homeAddress||"Home Address",onChange:o})]}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{htmlFor:"zipcode",children:"Zip Code:"}),e.jsx("input",{type:"text",id:"zipcode",name:"zipcode",value:s.zipcode,placeholder:t.zipcode||"Zip Code",onChange:o,pattern:"\\d+",title:"Zipcode must contain only numbers"})]}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number:"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:s.phoneNumber,placeholder:t.phoneNumber||"Phone Number",onChange:o,pattern:"\\d{10}",title:"Phone number must be exactly 10 digits"})]}),e.jsx("button",{type:"submit",className:r.submitBtn,children:"Update Address"})]})]})};export{G as default};
