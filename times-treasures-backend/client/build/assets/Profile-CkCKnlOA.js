import{r as o,A as P,j as e,L as u,a as C,y as p}from"./index-TEer4uYd.js";const b="_profileContainer_1iwbs_3",j="_profileHeader_1iwbs_25",N="_profilePicture_1iwbs_35",y="_userName_1iwbs_55",g="_buttonContainer_1iwbs_69",w="_profileButton_1iwbs_85",t={profileContainer:b,profileHeader:j,profilePicture:N,userName:y,buttonContainer:g,profileButton:w},k=()=>{const{user:r,token:f,setUser:d}=o.useContext(P),[h,n]=o.useState(""),l=o.useRef(null);o.useEffect(()=>{r&&r.profilePicture&&n(r.profilePicture)},[r]);const m=async i=>{if(i.target.files&&i.target.files[0]){const c=i.target.files[0];n(URL.createObjectURL(c));try{const s=new FormData;s.append("profilePicture",c);const x={headers:{Authorization:`Bearer ${f}`}},a=await C.put("http://localhost:5000/api/users/profile",s,x);a.data&&a.data.data&&d(a.data.data),p.success("Profile picture updated successfully!")}catch(s){console.error("Error updating profile picture:",s),p.error("Failed to update profile picture.")}}},_=()=>{l.current.click()};return e.jsxs("div",{className:t.profileContainer,children:[e.jsxs("div",{className:t.profileHeader,children:[e.jsx("img",{src:h,alt:"Profile",className:t.profilePicture}),e.jsx("h1",{className:t.userName,children:r?r.name:"Guest"}),e.jsx("input",{type:"file",ref:l,style:{display:"none"},accept:"image/*",onChange:m}),e.jsx("button",{onClick:_,className:t.uploadBtn,children:"Upload Picture"})]}),e.jsxs("div",{className:t.buttonContainer,children:[e.jsx(u,{to:"/purchase-history",className:t.profileButton,children:"Purchase History"}),e.jsx(u,{to:"/address",className:t.profileButton,children:"Your Addresses"})]})]})};export{k as default};
