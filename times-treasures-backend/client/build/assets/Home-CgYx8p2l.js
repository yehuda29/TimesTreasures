import{r as t,j as e,a as $}from"./index-TEer4uYd.js";import{I as F,P as M}from"./index.es-a6Voi_oT.js";import"./imageUtil-CPgIs8eT.js";import"./priceUtil-7XU-dkmR.js";const T="_featured_8iwua_3",O="_sectionTitle_8iwua_15",P="_productGrid_8iwua_20",B="_error_8iwua_30",C="_endMessage_8iwua_37",E="_loader_8iwua_38",H="_noImages_8iwua_43",l={featured:T,sectionTitle:O,productGrid:P,error:B,endMessage:C,loader:E,noImages:H},U="_hero_922dz_4",z="_heroOverlay_922dz_15",G="_heroContent_922dz_27",A="_title_922dz_39",D="_subtitle_922dz_45",u={hero:U,heroOverlay:z,heroContent:G,title:A,subtitle:D},k="_carousel_ddf90_6",L="_switching_ddf90_18",Q="_slide_ddf90_26",R="_oldSlide_ddf90_46",Y="_fadeOutUp_ddf90_1",Z="_activeSlide_ddf90_55",q="_fadeInUp_ddf90_1",c={carousel:k,switching:L,slide:Q,oldSlide:R,fadeOutUp:Y,activeSlide:Z,fadeInUp:q},J=({watchImages:r})=>{const[n,o]=t.useState(0),[_,h]=t.useState(null);return t.useEffect(()=>{const a=setInterval(()=>{h(n),o(s=>(s+1)%r.length)},1e4);return()=>clearInterval(a)},[n,r.length]),e.jsx("div",{className:c.carousel,children:r.map((a,s)=>s===_?e.jsx("div",{className:`${c.slide} ${c.oldSlide}`,style:{backgroundImage:`url(${a.url})`}},`old-${s}`):s===n?e.jsx("div",{className:`${c.slide} ${c.activeSlide}`,style:{backgroundImage:`url(${a.url})`}},`active-${s}`):e.jsx("div",{className:c.slide,style:{opacity:0}},`hidden-${s}`))})},V="/assets/HW_Full1-BZBFM-Fg.webp",K="/assets/HW_Full2-BBeu7BsB.webp",X="/assets/HW_Full3-BQWvT_Jm.webp",ee="/assets/HW_Full4-DWZOQlgt.webp",te=[{url:V,alt:"Watch 1"},{url:K,alt:"Watch 2"},{url:X,alt:"Watch 3"},{url:ee,alt:"Watch 4"}],se=()=>e.jsxs("section",{className:u.hero,children:[e.jsx(J,{watchImages:te}),e.jsx("div",{className:u.heroOverlay}),e.jsxs("div",{className:u.heroContent,children:[e.jsx("h1",{className:u.title,children:"Discover the Finest Watches"}),e.jsx("p",{className:u.subtitle,children:"The Treasures of Time are Ready For You!"})]})]}),ce=()=>{const[r,n]=t.useState([]),[o,_]=t.useState(1),[h]=t.useState(12),[a,s]=t.useState(!0),[f,j]=t.useState(null),[m,x]=t.useState(null),[p,S]=t.useState(12);t.useEffect(()=>{(async()=>{try{if(!a||o===m)return;x(o);const d=await $.get("http://localhost:5000/api/watches",{params:{page:o,limit:h}});console.log(`Fetching page=${o}`,d.data);const g=d.data.data,y=d.data.total;if(Array.isArray(g))n(v=>{const N=g.filter(I=>!v.some(b=>b._id===I._id)),w=[...v,...N];return w.length>=y&&s(!1),w});else throw new Error("Invalid data format received from API")}catch(d){console.error("Error fetching watches:",d),j("Failed to fetch watches.")}})()},[o,a,h,m]);const W=()=>{if(p>=r.length){s(!1);return}setTimeout(()=>{S(i=>i+12)},500)};return f?e.jsx("p",{className:l.error,children:f}):e.jsxs("div",{className:l.home,children:[e.jsx(se,{}),e.jsxs("section",{className:l.featured,children:[e.jsx("h2",{className:l.sectionTitle,children:"Featured Watches"}),e.jsx(F,{dataLength:r.length,next:W,hasMore:a,loader:e.jsx("h4",{className:l.loader,children:"Loading..."}),endMessage:e.jsx("p",{className:l.endMessage,children:e.jsx("b",{children:"You've seen all our featured watches!"})}),children:e.jsx("div",{className:l.productGrid,children:r.slice(0,p).map(i=>e.jsx(M,{watch:i},i._id))})})]})]})};export{ce as default};
